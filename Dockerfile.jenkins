FROM golangci/golangci-lint:latest



RUN echo "deb http://apt.postgresql.org/pub/repos/apt/ debian-pgdg main" | tee /var/apt/sources.list.d/postgres.list
RUN wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add -
RUN apt-get update
RUN apt install -y postgres
RUN apt-get install -y unzip

RUN service postgres start

RUN bash ./scripts/install-awscli.sh
RUN curl -L https://github.com/google/protobuf/releases/download/v3.6.1/protoc-3.6.1-linux-x86_64.zip -o /tmp/protoc.zip
RUN unzip /tmp/protoc.zip -d "$HOME"/protoc

RUN go get github.com/ckaznocha/protoc-gen-lint
RUN go get github.com/nilslice/protolock/cmd/protolock
RUN go get github.com/mfridman/tparse

RUN go version
